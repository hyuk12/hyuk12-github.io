## Hyuko의 Spring boot 공부 노트 블로그

[hyuko12 GitHub](https://github.com/hyuk12) 



### JPA 영속성 컨테스트

JPA에서 가장 중요한 2가지  
1. 객체와 관계형 데이터 베이스 매핑하기(정적)  
2. 영속성 컨텍스트  
    - 엔티티를 영구 저장하는 환경이라는 뜻
    - EntityManger.persist(entity): ->  
    엔티티를 영속성 컨텍스트라는 곳에 저장을 한다.  

- 영속성 컨텍스트는 논리적인 개념이다.  
  
  
```markdown
    영속성 컨텍스트의 종류

    - 영속(managed)
        - 영속성 컨텍스트에 관리되는 상태
        - 매니저 안에 객체를 넣었을 때
    
    - 비영속(new/transient)
        - 영속성 컨텍스트와 전혀 관계가 없는 새로운 상태
        - 사용할 객체만 생성한 단계
```

```
엔티티 조회, 1차캐시

영속성 컨텍스트 내부에 1차 캐시가 있다.
@Id 와 Entity 객체가 있다.

조회를 할 때 굳이 DB까지 가지 않고
영속성 컨텍스트 안에 저장 되어 있는 1차 캐시를
검색해서 캐시에 있는 값을 들고온다.

만약에 find를 했을 때 1차 캐시에 없는 값을 조회
했을 경우 DB에서 조회를 하고 있을 경우 1차 캐시에 저장을 하고
반환 한 후에 만약 다시 조회를 하게되면 이때는
DB까지 가지 않고 1차 캐시에서 반환을 하게 된다.
```


